<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redis 配置文件解析 | 技术博客，知识分享，学习笔记，问题解决方案</title>
    <meta name="description" content="啊郭的博客">
    <link rel="stylesheet" href="/guo-notes/assets/style.5e0eda6f.css">
    <link rel="modulepreload" href="/guo-notes/assets/app.a231f820.js">
    <link rel="modulepreload" href="/guo-notes/assets/classify_Redis_redis配置文件解析.md.e1343fb2.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c6a644e1 data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/guo-notes/" data-v-d5925166><!--[--><!--]--><!----><!--[-->啊郭的博客<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 后端技术 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/Redis/redis%E4%BB%8B%E7%BB%8D.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Redis<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/mysql/mysql%E4%BB%8B%E7%BB%8D.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Mysql<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/RabbitMQ/MQ%E7%9A%84%E6%A6%82%E5%BF%B5.html" data-v-e8e0fb1d data-v-3c355974><!--[-->RabbitMq<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/Docker/Docker%E4%BB%8B%E7%BB%8D.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Docker<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/Kubernetes/Kubernetes%E4%BB%8B%E7%BB%8D.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Kubernetes<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/Kafka/kafka%E4%BB%8B%E7%BB%8D.html" data-v-e8e0fb1d data-v-3c355974><!--[-->Kafka<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 计算机基础 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--[--><div class="VPMenuLink" data-v-9ca52130 data-v-e8e0fb1d><a class="VPLink link" href="/guo-notes/classify/计算机基础/计算机网络/" data-v-e8e0fb1d data-v-3c355974><!--[-->计算机网络<!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guo-notes/classify/algorithm/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->算法<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 杂项 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuGroup" data-v-1c5d0cfc data-v-9ca52130><!----><!--[--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/gyh-up?tab=repositories" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://blog.csdn.net/weixin_42258523?spm=1000.2115.3001.5343" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><embed src="https://g.csdnimg.cn/static/logo/favicon32.ico" style="border-radius: 100%;width: 20px;height: 20px;" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-1899cd41 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1899cd41><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1899cd41><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/gyh-up?tab=repositories" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://blog.csdn.net/weixin_42258523?spm=1000.2115.3001.5343" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><embed src="https://g.csdnimg.cn/static/logo/favicon32.ico" style="border-radius: 100%;width: 20px;height: 20px;" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c6a644e1 data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-c6a644e1 data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-35f99ef5><div class="title" role="button" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Redis 学习笔记</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E4%BB%8B%E7%BB%8D.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>一、介绍</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%AE%80%E4%BB%8B.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>二、数据类型简介</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>三、底层数据结构</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>四、五大数据类型实现原理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>五、redis内存淘汰策略</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>六、redis内存回收</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%86%85%E5%AD%98%E7%A2%8E%E7%89%87%E7%8E%87.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>七、redis内存碎片率</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF%E3%80%81%E7%A9%BF%E9%80%8F%E3%80%81%E9%9B%AA%E5%B4%A9.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>八、redis缓存击穿、穿透、雪崩</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%92%8C%E7%AE%A1%E9%81%93.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>九、redis慢查询和管道</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E6%8C%81%E4%B9%85%E5%8C%96.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十、redis持久化</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E4%BA%8B%E5%8A%A1.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十一、redis事务</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十二、redis分布式锁</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E4%B8%BB%E4%BB%8E.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十三、redis主从</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E5%93%A8%E5%85%B5.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十四、redis哨兵</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/guo-notes/classify/Redis/redis%E9%9B%86%E7%BE%A4.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十五、redis集群</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/guo-notes/classify/Redis/redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>十六、redis配置文件解析</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a644e1 data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-37ebe389><div class="container" data-v-37ebe389><div class="aside" data-v-37ebe389><div class="aside-curtain" data-v-37ebe389></div><div class="aside-container" data-v-37ebe389><div class="aside-content" data-v-37ebe389><div class="VPDocAside" data-v-37ebe389 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-37ebe389><div class="content-container" data-v-37ebe389><!--[--><!--]--><main class="main" data-v-37ebe389><div style="position:relative;" class="vp-doc _guo-notes_classify_Redis_redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90" data-v-37ebe389><div><h1 id="redis-配置文件解析" tabindex="-1">redis 配置文件解析 <a class="header-anchor" href="#redis-配置文件解析" aria-hidden="true">#</a></h1><h2 id="_1、开头" tabindex="-1">1、开头 <a class="header-anchor" href="#_1、开头" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps1.jpg" alt="image-20230222104347889"></p><p><strong>指明redis启动时必须把配置文件作为第一个命令参数，</strong> 需要注意的是后面需要使用内存大小时，可以指定单位，通常是以 k，gb，m的形式出现，并且<strong>单位不区分大小写</strong>。</p><h2 id="_2、includes（引入其他配置）" tabindex="-1">2、INCLUDES（引入其他配置） <a class="header-anchor" href="#_2、includes（引入其他配置）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps2.jpg" alt="image-20230222104430053"></p><p>包含其他配置文件，将 redis 的配置分离管理时使用</p><p>如果将此配置写在 redis.conf 文件的开头，那么后面的配置会覆盖引入文件的配置，如果想以引入文件的配置为主，那么需要将 include 配置写在 redis.conf 文件的末尾。</p><h2 id="_3、modules（模块）" tabindex="-1">3、MODULES（模块） <a class="header-anchor" href="#_3、modules（模块）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps3.jpg" alt="image-20230222104649428"></p><p>redis3.0 新增了集群，而 redis4.0 就是在3.0的基础上新增了许多功能，自定义模块配置就是其中之一。通过 loadmodule 配置将引入自定义模块来新增一些功能。</p><h2 id="_4、network（网络设置）" tabindex="-1">4、NETWORK（网络设置）<img src="/guo-notes/redis/wps4.jpg" alt="image-20230222104757899"> <a class="header-anchor" href="#_4、network（网络设置）" aria-hidden="true">#</a></h2><p>ps：配置较长，只截取了一部分，下同。</p><ul><li><p>bind：绑定 redis 服务器网卡 IP，默认为 127.0.0.1 本地地址。这样的话，访问 redis 服务只能通过本机的客户端连接，而无法通过远程连接。如果 bind 选项为空的话，那会接受所有来自于可用网络接口的连接。</p></li><li><p>protected-mode：它直译为保护模式。如果设置为yes，那么只允许我们在本机的回环连接，其他机器无法连接。这个安全层开启必须满足三个条件，不然安全层处于关闭状态：</p><blockquote><p>1、protected-mode yes（处于开启）</p></blockquote><blockquote><p>2、没有 bind 指令。原文：The server is not binding explicitly to a set of addresses using the “bind” directive</p></blockquote><blockquote><p>3、没有设置密码。原文：No password is configured。密码的优先级高。</p></blockquote><p>如果上面三个条件任何一个不满足，就不会开启保护机制。</p></li><li><p>port：指定 redis 运行的端口，默认是 6379。由于 Redis 是单线程模型，因此单机开多个 Redis 进程的时候需要修改端口。</p></li><li><p>tcp-backlog：在高并发系统中，你需要设置一个较高的<code>tcp-backlog</code>来避免客户端连接速度慢的问题（三次握手的速度）。注意，Linux内核将静默地将其截断为 /proc/sys/net/core/somaxconn 的值，因此请确保同时提高somaxconn和tcp_max_syn_backlog的值，以便获得预期的效果</p></li><li><p>timeout：设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接。默认值为 0，表示不关闭。</p></li><li><p>tcp-keepalive：单位是秒，表示将周期性的使用 SO_KEEPALIVE 检测客户端是否还处于健康状态，避免服务器一直阻塞，官方给出的建议值是 300s，如果设置为 0，则不会周期性的检测。</p></li></ul><h2 id="_5、general（普通设置）" tabindex="-1">5、GENERAL（普通设置） <a class="header-anchor" href="#_5、general（普通设置）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps5.jpg" alt="image-20230222110556804"></p><p>具体配置详解：</p><ul><li><p>daemonize：设置为 yes 表示指定 Redis 以守护进程的方式启动（后台启动）。默认值为 no</p></li><li><p>supervised ：若从 upstart 或 systemd 运行 Redis，则 Redis 可以与监控树交互。</p><blockquote><p>supervised no：无相互监督</p></blockquote><blockquote><p>supervised upstart：使 Redis 进入 SIGSTOP 模式并监控 upstart</p></blockquote><blockquote><p>supervised systemd ：通过设置 READY=1 到 $NOTIFY_SOCKET 来监控 systemd</p></blockquote><blockquote><p>supervised auto：基于 UPSTART_JOB 或 NOTIFY_SOCKET 环境变量的监督自动检测 upstar t或 systemd 方法</p></blockquote></li><li><p>pidfile：配置 PID 文件路径，当 redis 作为守护进程运行的时候，它会把 pid 默认写到 /var/redis/run/redis_6379.pid 文件里面</p></li><li><p>loglevel：定义日志级别。默认值为notice，有如下4种取值：</p><blockquote><p>debug（记录大量日志信息，适用于开发、测试阶段）</p></blockquote><blockquote><p>verbose（较多日志信息）</p></blockquote><blockquote><p>notice（适量日志信息，使用于生产环境）</p></blockquote><blockquote><p>warning（仅有部分重要、关键信息才会被记录）</p></blockquote></li><li><p>logfile：配置log文件地址，默认打印在命令行终端的窗口上</p></li><li><p>syslog-enabled：系统日志是否开启</p></li><li><p>syslog-ident：指定syslog标识</p></li><li><p>syslog-facility：指定输出日志设备 LOCAL0-LOCAL7</p></li><li><p>databases：设置数据库的数目。默认的数据库是DB 0 ，可以在每个连接上使用 <code>select &lt;dbid&gt;</code> 命令选择一个不同的数据库，dbid 是一个介于 0到databases - 1 之间的数值。默认值是 16，也就是说默认 Redis 有16个数据库。</p></li><li><p>show-logo：默认logo标识只在交互回话中显示。该设置可以设置始终在启动日志中显示 ASCII art 徽标。</p></li></ul><h2 id="_6、snapshotting（快照持久化）" tabindex="-1">6、SNAPSHOTTING（快照持久化） <a class="header-anchor" href="#_6、snapshotting（快照持久化）" aria-hidden="true">#</a></h2><p>这里的配置主要用来做持久化操作。</p><p><img src="/guo-notes/redis/wps6.jpg" alt="image-20230222112659252"></p><blockquote><p>save：指定多长时间内(秒)，有多少次更新操作，就将数据同步到数据文件，可以多条件配合</p><p>save 900 1：900s 内至少有 1 次更新操作则保存</p><p>save 300 10：300s 内至少有 10 次更新操作则保存</p><p>save 60 10000：60s 内至少有 10000 次更新操作则保存</p></blockquote><blockquote><p>stop-writes-on-bgsave-error ：默认值为 yes。当启用了 RDB 且最后一次后台保存数据失败，Redis 停止接收数据。这会让用户意识到数据没有正确持久化到磁盘上，否则没有人会注意到灾难（disaster）发生了。</p></blockquote><blockquote><p>rdbcompression：默认值是yes。对于存储到磁盘中的快照，可以设置是否进行压缩存储。如果是的话， redis 会采用 LZF 算法进行压缩。如果你不想消耗 CPU 来进行压缩的话，可以设置为关闭此功能，但是存储在磁盘上的快照会比较大。</p></blockquote><blockquote><p>rdbchecksum：默认值是 yes。在存储快照后，我们还可以让 redis 使用 CRC64 算法来进行数据校验，但是这样做会增加大约 10% 的性能消耗，如果希望获取到最大的性能提升，可以关闭此功能。</p></blockquote><blockquote><p>dbfilename：设置快照的文件名，默认是 dump.rdb</p></blockquote><blockquote><p>dir：设置快照文件的存放路径，这个配置项一定是个目录，而不能是文件名。使用上面的 dbfilename 作为保存的文件名。</p></blockquote><h2 id="_7、replication（主从）" tabindex="-1">7、REPLICATION（主从） <a class="header-anchor" href="#_7、replication（主从）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps7.jpg" alt="image-20230222113316776"></p><blockquote><p>slaveof ：当本机为 slave 服务时，设置 master 服务的 IP 和端口号， 在Redis启动时，会自动从master进行数据同步</p></blockquote><blockquote><p>slave-serve-stale-data：当一个slav和一个master是去联系或在进行复制时，slave是否进行应答。yes，Slave仍会应答请求，但返回数据可能已过时，或者数据为空；no，在执行 info 和 slaveof 之外的命令时，slave 将返回一个 &quot;SYNC with master in progress&quot;</p></blockquote><blockquote><p>slave-read-only：slave是否只读</p></blockquote><blockquote><p>repl-diskless-sync：主从数据复制是否使用无硬盘复制功能。默认值为no。</p></blockquote><blockquote><p>repl-diskless-sync-delay：启用无硬盘备份，设置服务器等待多少秒后才会通过套接字向从站传送RDB文件。 这一点很重要，因为一旦传送开始，就不可能再为一个新到达的从站服务。从站则要排队等待下一次RDB传送。因此服务器等待一段时间以期更多的从站到达。延迟时间以秒为单位，默认为5秒。要关掉这一功能，只需将它设置为0秒，传送会立即启动。默认值为5。</p></blockquote><blockquote><p>repl-ping-slave-perio：从服务器以预定义的时间间隔向服务器发送 ping 信号。默认值是10秒。</p></blockquote><blockquote><p>repl-disable-tcp-nodelay：同步之后是否禁用从站上的 TCP_NODELAY。如果你选择 yes，redis 会使用较少量的 TCP 包和带宽向从站发送数据，但这会导致在从站增加一点数据的延时。Linux内核默认配置情况下最多40毫秒的延时。如果选择no，从站的数据延时不会那么多，但备份需要的带宽相对较多。默认情况下我们将潜在因素优化，但在高负载情况下或者在主从站都跳的情况下，把它切换为 yes 是个好主意。默认值为 no。</p></blockquote><blockquote><p>slave-priority：slave 节点的优先级，低优先的 slave 节点更容易被提升为 master 节点；优先级为 0，则该 slave 节点不能被提升为 master 节点</p></blockquote><h2 id="_8、security（安全）" tabindex="-1">8、SECURITY（安全） <a class="header-anchor" href="#_8、security（安全）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps8.jpg" alt="image-20230222114227343"></p><blockquote><p>rename-command：命令重命名，对于一些危险命令例如：flushdb（清空数据库）flushall（清空所有记录）config（客户端连接后可配置服务器）keys（客户端连接后可查看所有存在的键）</p><p>禁用以上命令来使得服务器更加安全，禁用的具体做法是是：<code>rename-command FLUSHALL</code></p><p>也可以保留命令但是不能轻易使用，重命名这个命令即可：<code>rename-command FLUSHALL abcdefg</code></p><p>这样，重启服务器后则需要使用新命令来执行操作，否则服务器会报错 unknown command。</p></blockquote><blockquote><p>requirepass：设置 Redis 连接密码，如果配置了连接密码，客户端在连接 Redis 时，需要通过 <code>AUTH &lt;password&gt;</code> 命令提供密码，默认关闭</p></blockquote><h2 id="_9、clients（客户端）" tabindex="-1">9、CLIENTS（客户端） <a class="header-anchor" href="#_9、clients（客户端）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps9.jpg" alt="image-20230222114531815"></p><p>maxclients ：允许最大客户端连接数，默认无限制，Redis 可以同时打开的客户端连接数为 Redis 进程可以打开的最大文件。当客户端连接数到达限制时，Redis 会关闭新的连接并向客户端返回 max number of clients reached 错误信息</p><h2 id="_10、memory-management（内存管理）" tabindex="-1">10、MEMORY MANAGEMENT（内存管理） <a class="header-anchor" href="#_10、memory-management（内存管理）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps10.jpg" alt="image-20230222114642769"></p><blockquote><p>maxmemory：redis 最大内存限制，redis 达到最大内存后，会尝试清除已到期或即将到期的 key。若清理后仍然达到最大内存设置，将无法继续写入；如果设置为0 ，表示不作限制。通常是配合下面介绍的maxmemory-policy 参数一起使用。</p></blockquote><blockquote><p>maxmemory-policy ：当内存使用达到 maxmemory 设置的最大值时，redis 使用的内存清除策略。有以下几种可以选择：</p><p>1）volatile-lru：利用 LRU 算法移除设置了过期时间的 key (LRU：最近使用 Least Recently Used )</p><p>2）allkeys-lru：利用 LRU 算法移除任何 key</p><p>3）volatile-random：随机移除设置了过期时间的 key</p><p>4）allkeys-random：随机移除 key</p><p>5）volatile-ttl：移除即将过期的 key（minimal TTL）</p><p>6）noeviction noeviction：不移除任何key，只是返回一个写错误 ，默认选项</p></blockquote><blockquote><p>maxmemory-samples：设置检验样本数，默认3。LRU 和 TTL 算法不是很精准（相对精确的算法，为了节省内存），设置样本检验大小进行验证。</p></blockquote><h2 id="_11、lazy-freeing（阻塞释放空间）" tabindex="-1">11、LAZY FREEING（阻塞释放空间） <a class="header-anchor" href="#_11、lazy-freeing（阻塞释放空间）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps11.jpg" alt="image-20230222115527017"></p><p>对不同数据的删除策略，设置是否阻塞 ，Redis 删除数据 FLUSHALL 和 FLUSHDB 的DEL、UNLINK 和 ASYNC 选项由用户控制，且默认都是阻塞的。</p><h2 id="_12、append-only-mode（aof持久化）" tabindex="-1">12、APPEND ONLY MODE（AOF持久化） <a class="header-anchor" href="#_12、append-only-mode（aof持久化）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps12.jpg" alt="image-20230222115630919"></p><blockquote><p>appendonly：默认 redis 使用的是 rdb 方式持久化，这种方式在许多应用中已经足够用了。但是 redis 如果中途宕机，会导致可能有几分钟的数据丢失，根据save来策略进行持久化，Append Only File是另一种持久化方式， 可以提供更好的持久化特性。Redis 会把每次写入的数据在接收后都写入 appendonly.aof 文件，每次启动时 Redis 都会先把这个文件的数据读入内存里，先忽略 RDB 文件。默认值为 no。</p></blockquote><blockquote><p>appendfilename：aof文件名，默认是&quot;appendonly.aof&quot;</p></blockquote><blockquote><p>appendfsync：aof 持久化策略的配置；no表示不执行 fsync，由操作系统保证数据同步到磁盘，速度最快；always 表示每次写入都执行 fsync，以保证数据同步到磁盘；everysec 表示每秒执行一次 fsync，可能会导致丢失这 1s 数据</p></blockquote><blockquote><p>no-appendfsync-on-rewrite：在 aof 重写或者写入 rdb 文件的时候，会执行大量 IO，此时对于 everysec 和always 的 aof 模式来说，执行 fsync 会造成阻塞过长时间，no-appendfsync-on-rewrite 字段设置为默认设置为 no。如果对延迟要求很高的应用，这个字段可以设置为 yes，否则还是设置为 no，这样对持久化特性来说这是更安全的选择。 设置为 yes 表示 rewrite 期间对新写操作不 fsync，暂时存在内存中,等 rewrite 完成后再写入，默认为 no，建议 yes。Linux 的默认 fsync 策略是 30 秒。可能丢失 30 秒数据。默认值为 no。</p></blockquote><blockquote><p>auto-aof-rewrite-percentage：默认值为100。aof 自动重写配置，当目前 aof 文件大小超过上一次重写的aof 文件大小的百分之多少进行重写，即当 aof 文件增长到一定大小的时候，Redis 能够调用 bgrewriteaof 对日志文件进行重写。当前 AOF 文件大小是上次日志重写得到 AOF 文件大小的二倍（设置为100）时，自动启动新的日志重写过程。</p></blockquote><blockquote><p>auto-aof-rewrite-min-size：64mb。设置允许重写的最小 aof 文件大小，避免了达到约定百分比但尺寸仍然很小的情况还要重写。</p></blockquote><blockquote><p>aof-load-truncated：aof 文件可能在尾部是不完整的，当 redis 启动的时候，aof 文件的数据被载入内存。重启可能发生在 redis 所在的主机操作系统宕机后，尤其在 ext4 文件系统没有加上 data=ordered 选项，出现这种现象 redis 宕机或者异常终止不会造成尾部不完整现象，可以选择让 redis 退出，或者导入尽可能多的数据。如果选择的是 yes，当截断的 aof 文件被导入的时候，会自动发布一个 log 给客户端然后 load。如果是 no，用户必须手动 redis-check-aof 修复 AOF 文件才可以。默认值为 yes。</p></blockquote><h2 id="_13、lua-scripting（lua脚本）" tabindex="-1">13、LUA SCRIPTING（LUA脚本） <a class="header-anchor" href="#_13、lua-scripting（lua脚本）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps13.jpg" alt="image-20230222120159970"></p><blockquote><p>lua-time-limit：一个 lua 脚本执行的最大时间，单位为 ms。默认值为 5000</p></blockquote><h2 id="_14、redis-cluster（redis集群）" tabindex="-1">14、REDIS CLUSTER（redis集群） <a class="header-anchor" href="#_14、redis-cluster（redis集群）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps14.jpg" alt="image-20230222120140480"></p><blockquote><p>cluster-enabled：集群开关，默认是不开启集群模式。</p></blockquote><blockquote><p>cluster-config-file：集群配置文件的名称，每个节点都有一个集群相关的配置文件，持久化保存集群的信息。 这个文件并不需要手动配置，这个配置文件由 Redis 生成并更新，每个 Redis 集群节点需要一个单独的配置文件。请确保与实例运行的系统中配置文件名称不冲突。默认配置为 nodes-6379.conf。</p></blockquote><blockquote><p>cluster-node-timeout ：可以配置值为 15000。节点互连超时的阀值，集群节点超时毫秒数</p></blockquote><blockquote><p>cluster-slave-validity-factor ：可以配置值为10。在进行故障转移的时候，全部 slave 都会请求申请为master，但是有些 slave 可能与 master 断开连接一段时间了， 导致数据过于陈旧，这样的 slave 不应该被提升为 master。该参数就是用来判断 slave 节点与 master 断线的时间是否过长。</p><p>判断方法是：比较 slave 断开连接的时间和 <code>（node-timeout * slave-validity-factor） + repl-ping-slave-period</code> 如果节点超时时间为三十秒, 并且 slave-validity-factor 为 10，假设默认的 repl-ping-slave-period 是 10 秒，即如果超过 310 秒 slave 将不会尝试进行故障转移</p></blockquote><blockquote><p>cluster-migration-barrier：可以配置值为1。maste 的 slave 数量大于该值，slave 才能迁移到其他孤立master 上，如这个参数若被设为 2，那么只有当一个主节点拥有 2 个可工作的从节点时，它的一个从节点会尝试迁移。</p></blockquote><blockquote><p>cluster-require-full-coverage：默认情况下，集群全部的 slot 有节点负责，集群状态才为 ok，才能提供服务。 设置为 no，可以在 slot 没有全部分配的时候提供服务。不建议打开该配置，这样会造成分区的时候，小分区的 master 一直在接受写请求，而造成很长时间数据不一致。</p></blockquote><h2 id="_15、cluster-docker-nat-support（集群docker-nat设置）" tabindex="-1">15、CLUSTER DOCKER/NAT support（集群DOCKER/NAT设置） <a class="header-anchor" href="#_15、cluster-docker-nat-support（集群docker-nat设置）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps15.jpg" alt="image-20230222120923175"></p><blockquote><p>在某些部署中，Redis 集群节点地址发现失败，因为地址是 NAT-ted 的，或者因为端口被转发(典型的情况是Docker 和其他容器)。为了让 Redis 集群在这样的环境中工作，需要一个静态配置，指定节点的公共地址 。每个节点都指示节点的地址、客户端端口和集群消息总线端口。然后将信息发布到总线包的头部，以便其他节点能够正确映射发布信息的节点的地址。</p></blockquote><h2 id="_16、slow-log（慢日志）" tabindex="-1">16、SLOW LOG（慢日志） <a class="header-anchor" href="#_16、slow-log（慢日志）" aria-hidden="true">#</a></h2><p><img src="/guo-notes/redis/wps16.jpg" alt="image-20230222120903531"></p><blockquote><p>slowlog-log-slower-than ：设置 Redis 命令的执行时间(以微秒为单位)超过多少，便记录命令。负数禁用slowlog，而值 0 强制记录每个命令。</p></blockquote><blockquote><p>slowlog-max-len 128：slowlog 的长度</p></blockquote><h2 id="_17、advanced-config（高级设置）" tabindex="-1">17、ADVANCED CONFIG（高级设置） <a class="header-anchor" href="#_17、advanced-config（高级设置）" aria-hidden="true">#</a></h2><p>该配置模块可以参考 <a href="./redis五大数据类型实现原理.html">redis五大数据类型实现原理</a> 中的编码转化，按照默认的配置即可。</p><p><img src="/guo-notes/redis/wps17.jpg" alt="image-20230222121101397"></p><blockquote><p>hash-max-ziplist-entries 和 hash-max-ziplist-value：当同时满足下面两个条件时，使用 <code>ziplist</code>（压缩列表）编码 <strong>（表保存元素个数小于 512 个；每个元素长度小于 64 字节）</strong> 不能满足这两个条件的时候使用 <code>hashtable</code> 编码。</p></blockquote><blockquote><p>list-max-ziplist-size：list 类型数据每个内部列表节点允许的条目数可以指定为固定的最大大小或元素的最大数量。</p></blockquote><blockquote><p>list-compress-depth：列表压缩深度，压缩深度是指从列表的<em>each</em>边到<em>exclude</em>压缩的quicklist ziplist节点的数量。</p><p>0:禁用所有列表压缩</p><p>1: [头]- &gt;节点- &gt;节点- &gt;…- &gt;节点- &gt;[尾]</p><p>depth 1的意思是“在列表中1个节点之后才开始压缩，从head或tail开始” ； [头]、[尾]永远不会被压缩;内部节点将被压缩。</p><p>2:[头]- &gt;[下]- &gt;节点- &gt;节点- &gt;…- &gt;节点- &gt;[上一页]- &gt;(尾巴)</p><p>这里的意思是:不要压缩head或head-&gt;next或tail-&gt;prev或tail，而是压缩它们之间的所有节点。</p><p>3:[头]- &gt;[下]- &gt;[下]- &gt;节点- &gt;节点- &gt;…- &gt;节点- &gt;[上一页]- &gt;[上一页]- &gt;(尾巴)</p></blockquote><blockquote><p>set-max-intset-entries：当集合同时满足以下两个条件时，使用 <code>intset</code> 编码 <strong>（集合对象中所有元素都是整数；集合对象所有元素数量不超过 512）</strong> 不能满足这两个条件的就使用 <code>hashtable</code> 编码。</p></blockquote><blockquote><p>zset-max-ziplist-entries 和 zset-max-ziplist-value ：当有序集合对象同时满足以下两个条件时，对象使用 <code>ziplist</code> 编码 <strong>（保存的元素数量小于 128；保存的所有元素长度都小于 64 字节）</strong> 不能满足上面两个条件的使用 <code>skiplist </code>编码。</p></blockquote></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-37ebe389 data-v-a54a85bd><!----><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/guo-notes/classify/Redis/redis%E9%9B%86%E7%BE%A4.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>十五、redis集群</span></a></div><div class="has-prev pager" data-v-a54a85bd><!----></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"classify_docker_docker compose服务编排.md\":\"655facb6\",\"classify_docker_dockerhub和私人仓库.md\":\"a40ffe45\",\"classify_docker_dockerfile.md\":\"de65de7f\",\"classify_docker_docker介绍.md\":\"141385ff\",\"classify_docker_docker命令.md\":\"d3690ad7\",\"classify_docker_docker安装和启动.md\":\"f37e85e5\",\"classify_docker_docker架构.md\":\"924be479\",\"classify_elasticsearch_elasticsearch介绍.md\":\"fa72602b\",\"classify_elasticsearch_elasticsearch.md\":\"b8ab7aec\",\"classify_kafka_kafka-php整合.md\":\"259f332f\",\"classify_kafka_kafka-微服务整合.md\":\"d99cab23\",\"classify_kafka_kafka.md\":\"84007841\",\"classify_kafka_kafka介绍.md\":\"ab6f0753\",\"classify_kafka_kafka和rabbitmq对比.md\":\"0f3974d9\",\"classify_kafka_kafka集群.md\":\"22743ce8\",\"classify_kafka_kafka零拷贝技术.md\":\"05d1ecc3\",\"classify_kubernetes_dashboard.md\":\"21c0a6f4\",\"classify_kubernetes_kubernetes介绍.md\":\"4d21badc\",\"classify_kubernetes_kubernetes实战入门.md\":\"45403e0b\",\"classify_kubernetes_kubernetes资源管理.md\":\"07f42438\",\"classify_kubernetes_kubernetes集群环境搭建.md\":\"e76062bc\",\"classify_kubernetes_pod控制器详解.md\":\"0755e433\",\"classify_kubernetes_pod详解.md\":\"2102bed0\",\"classify_kubernetes_service详解.md\":\"b9ada473\",\"classify_kubernetes_安全认证.md\":\"4fea5a86\",\"classify_kubernetes_数据存储.md\":\"ab15e9bc\",\"classify_nginx_nginx.md\":\"19c5b7c1\",\"classify_rabbitmq_exchange核心概念.md\":\"1ab4b083\",\"classify_rabbitmq_mq的概念.md\":\"555dd70a\",\"classify_rabbitmq_mq的种类和对比.md\":\"41b780cd\",\"classify_rabbitmq_rabbitmq命令行.md\":\"2a2a2eab\",\"classify_rabbitmq_rabbitmq工作模式.md\":\"f4e7eb68\",\"classify_rabbitmq_rabbitmq应用方案.md\":\"613e9e69\",\"classify_rabbitmq_rabbitmq的安装和启动.md\":\"ce1e2443\",\"classify_rabbitmq_rabbitmq简介.md\":\"d1274610\",\"classify_rabbitmq_rabbitmq管控台介绍.md\":\"2c5d24be\",\"classify_rabbitmq_rabbitmq集群搭建.md\":\"def4a4eb\",\"classify_rabbitmq_rabbitmq高级特性.md\":\"79e96997\",\"classify_rabbitmq_rabbitmq高级特性1.md\":\"61e0d502\",\"classify_redis_redis主从.md\":\"8418e1a5\",\"classify_redis_redis事务.md\":\"252b4505\",\"classify_redis_redis五大数据类型实现原理.md\":\"7a58f464\",\"classify_redis_redis介绍.md\":\"9a026f6c\",\"classify_redis_redis内存回收.md\":\"aad262c9\",\"classify_redis_redis内存淘汰策略.md\":\"0b1c3670\",\"classify_redis_redis内存碎片率.md\":\"be48d293\",\"classify_redis_redis分布式锁.md\":\"b9931f89\",\"classify_redis_redis哨兵.md\":\"607d9de5\",\"classify_redis_redis底层数据结构.md\":\"68b4c269\",\"classify_redis_redis慢查询和管道.md\":\"b1727e90\",\"classify_redis_redis持久化.md\":\"9c60aa93\",\"classify_redis_redis数据类型简介.md\":\"5f40496b\",\"classify_redis_redis缓存击穿、穿透、雪崩.md\":\"29bad1f6\",\"classify_redis_redis配置文件解析.md\":\"e1343fb2\",\"classify_redis_redis集群.md\":\"65743d8e\",\"classify_algorithm_concept_复杂度-时间复杂度和空间复杂度.md\":\"4231ba14\",\"classify_algorithm_concept_数据结构-堆.md\":\"75f9fe15\",\"classify_algorithm_concept_数据结构-栈与队列.md\":\"90975225\",\"classify_algorithm_concept_数据结构-树.md\":\"994db728\",\"classify_algorithm_concept_算法-排序算法.md\":\"ad63de45\",\"classify_algorithm_concept_算法-查找算法.md\":\"2697c31f\",\"classify_algorithm_concept_算法-深度优先搜索和广度优先搜索.md\":\"0c1c9409\",\"classify_algorithm_index.md\":\"de774b09\",\"classify_algorithm_title_leetcode-1.md\":\"7c5fc3fc\",\"classify_algorithm_title_leetcode-101.md\":\"967df4e5\",\"classify_algorithm_title_leetcode-104.md\":\"8a2faa09\",\"classify_algorithm_title_leetcode-110.md\":\"29403a59\",\"classify_algorithm_title_leetcode-141.md\":\"72ddd440\",\"classify_algorithm_title_leetcode-142.md\":\"09248920\",\"classify_algorithm_title_leetcode-144.md\":\"45427b40\",\"classify_algorithm_title_leetcode-145.md\":\"17e92f2d\",\"classify_algorithm_title_leetcode-160.md\":\"60cbe702\",\"classify_algorithm_title_leetcode-206.md\":\"7912b842\",\"classify_algorithm_title_leetcode-21.md\":\"6b3b78ac\",\"classify_algorithm_title_leetcode-226.md\":\"5f59d059\",\"classify_algorithm_title_leetcode-232.md\":\"5179497a\",\"classify_algorithm_title_leetcode-234.md\":\"dd7acdc7\",\"classify_algorithm_title_leetcode-283.md\":\"84352214\",\"classify_algorithm_title_leetcode-394.md\":\"0e163add\",\"classify_algorithm_title_leetcode-448.md\":\"6603b838\",\"classify_algorithm_title_leetcode-70.md\":\"ab7cbcf3\",\"classify_algorithm_title_leetcode-83.md\":\"b598c1f0\",\"classify_algorithm_title_leetcode-876.md\":\"d4127d2d\",\"classify_algorithm_title_leetcode-88.md\":\"190904c6\",\"classify_algorithm_title_leetcode-912.md\":\"4e55969c\",\"classify_algorithm_title_leetcode-94.md\":\"b66212d9\",\"classify_algorithm_title_leetcode-模板.md\":\"dd7abcd1\",\"classify_algorithm_title_剑指offer-22.md\":\"071899f2\",\"classify_algorithm_其他-设计.md\":\"1b7a410b\",\"classify_algorithm_基础-排序.md\":\"a8fd5bca\",\"classify_algorithm_基础数据结构-哈希表.md\":\"55c2efe9\",\"classify_algorithm_基础数据结构-字符串.md\":\"b4c57240\",\"classify_algorithm_基础数据结构-数组.md\":\"74014a9b\",\"classify_algorithm_基础数据结构-栈.md\":\"792f534a\",\"classify_algorithm_基础数据结构-树.md\":\"6194934f\",\"classify_algorithm_基础数据结构-链表.md\":\"6d312aa4\",\"classify_algorithm_基础数据结构-队列.md\":\"ca716a8f\",\"classify_algorithm_技巧-双指针.md\":\"ae6d45a7\",\"classify_algorithm_数学-斐波那契数列.md\":\"e8a9d2a3\",\"classify_algorithm_数学-相遇问题.md\":\"faf92821\",\"classify_algorithm_算法-动态规划.md\":\"551a4557\",\"classify_algorithm_算法-广度优先搜索.md\":\"2ca4c1a1\",\"classify_algorithm_算法-排序.md\":\"221cef6f\",\"classify_algorithm_算法-深度优先搜索.md\":\"5a6a1283\",\"classify_algorithm_算法-迭代.md\":\"78c0def3\",\"classify_algorithm_算法-递归.md\":\"d796f79a\",\"classify_mysql_mvcc多版本并发控制.md\":\"a3215a75\",\"classify_mysql_mysql三大日志.md\":\"0e324ea0\",\"classify_mysql_mysql主从复制.md\":\"d80c3229\",\"classify_mysql_mysql事务.md\":\"892bab2f\",\"classify_mysql_mysql介绍.md\":\"aa74d972\",\"classify_mysql_mysql分区.md\":\"9f990b35\",\"classify_mysql_mysql分库分表.md\":\"ea70aaa9\",\"classify_mysql_mysql索引.md\":\"19e60ba6\",\"classify_mysql_mysql语法.md\":\"2166e60e\",\"classify_mysql_mysql读写分离.md\":\"1cd5af3f\",\"classify_mysql_mysql负载均衡和高可用.md\":\"ba820133\",\"classify_mysql_mysql锁.md\":\"e9dcca56\",\"classify_mysql_sql语句优化.md\":\"7e4218cb\",\"classify_mysql_sql语句执行流程.md\":\"a48bacf6\",\"classify_mysql_存储引擎.md\":\"54fabccf\",\"classify_mysql_性能分析.md\":\"2aa5ada9\",\"classify_mysql_物理文件.md\":\"43e326f2\",\"classify_mysql_管理常用工具.md\":\"e3c067f2\",\"classify_sundry_concept_存储单位与速率单位.md\":\"d9168b29\",\"classify_sundry_concept_性能指标.md\":\"c0b289bb\",\"classify_sundry_tools_git_github 连接失败.md\":\"657f2cb0\",\"classify_sundry_tools_vscode_vscode 启动 debug.md\":\"ee0e5ba9\",\"classify_框架学习_laravel_artisan控制台命令.md\":\"b6ba645b\",\"classify_框架学习_laravel_生命周期相关核心概念.md\":\"8cba0160\",\"classify_解决方案_redis主从存在的问题和解决方案.md\":\"56b656f7\",\"classify_解决方案_数据库与缓存一致性解决方案.md\":\"cb8257fa\",\"classify_计算机基础_计算机网络_io模型.md\":\"8759accd\",\"classify_计算机基础_计算机网络_index.md\":\"098ea9ee\",\"classify_设计模式.md\":\"4f9a1cf6\",\"classify_面试常问_web安全.md\":\"068eca72\",\"classify_面试常问_一次网络请求的完整过程.md\":\"aff879ca\",\"index.md\":\"f2652fb8\",\"preface_install.md\":\"4a199460\",\"preface_preface.md\":\"4282cc4a\"}")</script>
    <script type="module" async src="/guo-notes/assets/app.a231f820.js"></script>
    
  </body>
</html>