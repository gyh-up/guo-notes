import{_ as s}from"./chunks/rabbitmq-59.6c28fc9a.js";import{_ as n,c as a,o as l,a as p}from"./app.867b012f.js";const o="/guo-notes/rabbitmq/rabbitmq-63.png",e="/guo-notes/rabbitmq/rabbitmq-58.png",c="/guo-notes/rabbitmq/rabbitmq-64.png",r="/guo-notes/rabbitmq/rabbitmq-60.png",t="/guo-notes/rabbitmq/rabbitmq-61.png",D="/guo-notes/rabbitmq/rabbitmq-62.png",x=JSON.parse('{"title":"Exchange \u4EA4\u6362\u673A\u6838\u5FC3\u6982\u5FF5","description":"","frontmatter":{"typora-root-url":"..\\\\..\\\\public"},"headers":[{"level":2,"title":"\u4E00\u3001Exchange \u6982\u5FF5","slug":"\u4E00\u3001exchange-\u6982\u5FF5","link":"#\u4E00\u3001exchange-\u6982\u5FF5","children":[]},{"level":2,"title":"\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027","slug":"\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027","link":"#\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027","children":[]},{"level":2,"title":"\u4E09\u3001Direct Exchange(\u76F4\u8FDE)","slug":"\u4E09\u3001direct-exchange-\u76F4\u8FDE","link":"#\u4E09\u3001direct-exchange-\u76F4\u8FDE","children":[]},{"level":2,"title":"1\u3001\u4EE3\u7801\u6F14\u793A","slug":"_1\u3001\u4EE3\u7801\u6F14\u793A","link":"#_1\u3001\u4EE3\u7801\u6F14\u793A","children":[]},{"level":2,"title":"\u56DB\u3001Topic Exchange","slug":"\u56DB\u3001topic-exchange","link":"#\u56DB\u3001topic-exchange","children":[]},{"level":2,"title":"1\u3001\u4EE3\u7801\u6F14\u793A","slug":"_1\u3001\u4EE3\u7801\u6F14\u793A-1","link":"#_1\u3001\u4EE3\u7801\u6F14\u793A-1","children":[]},{"level":2,"title":"\u4E94\u3001Fanout Exchange","slug":"\u4E94\u3001fanout-exchange","link":"#\u4E94\u3001fanout-exchange","children":[]},{"level":2,"title":"1\u3001\u4EE3\u7801\u6F14\u793A","slug":"_1\u3001\u4EE3\u7801\u6F14\u793A-2","link":"#_1\u3001\u4EE3\u7801\u6F14\u793A-2","children":[]},{"level":2,"title":"\u516D\u3001Headers Exchanges","slug":"\u516D\u3001headers-exchanges","link":"#\u516D\u3001headers-exchanges","children":[]},{"level":2,"title":"\u4E03\u3001\u5176\u4ED6","slug":"\u4E03\u3001\u5176\u4ED6","link":"#\u4E03\u3001\u5176\u4ED6","children":[]},{"level":2,"title":"1\u3001Bingding \u2014\u2014 \u7ED1\u5B9A","slug":"_1\u3001bingding-\u2014\u2014-\u7ED1\u5B9A","link":"#_1\u3001bingding-\u2014\u2014-\u7ED1\u5B9A","children":[]},{"level":2,"title":"2\u3001Queue\u2014\u2014\u6D88\u606F\u961F\u5217","slug":"_2\u3001queue\u2014\u2014\u6D88\u606F\u961F\u5217","link":"#_2\u3001queue\u2014\u2014\u6D88\u606F\u961F\u5217","children":[]},{"level":2,"title":"3\u3001Message\u2014\u2014\u6D88\u606F","slug":"_3\u3001message\u2014\u2014\u6D88\u606F","link":"#_3\u3001message\u2014\u2014\u6D88\u606F","children":[]},{"level":2,"title":"4\u3001\u5176\u4ED6\u5C5E\u6027","slug":"_4\u3001\u5176\u4ED6\u5C5E\u6027","link":"#_4\u3001\u5176\u4ED6\u5C5E\u6027","children":[]},{"level":2,"title":"5\u3001Virtual Host\u865A\u62DF\u4E3B\u673A","slug":"_5\u3001virtual-host\u865A\u62DF\u4E3B\u673A","link":"#_5\u3001virtual-host\u865A\u62DF\u4E3B\u673A","children":[]}],"relativePath":"classify/RabbitMQ/Exchange\u6838\u5FC3\u6982\u5FF5.md","lastUpdated":null}'),y={name:"classify/RabbitMQ/Exchange\u6838\u5FC3\u6982\u5FF5.md"},A=p('<h1 id="exchange-\u4EA4\u6362\u673A\u6838\u5FC3\u6982\u5FF5" tabindex="-1">Exchange \u4EA4\u6362\u673A\u6838\u5FC3\u6982\u5FF5 <a class="header-anchor" href="#exchange-\u4EA4\u6362\u673A\u6838\u5FC3\u6982\u5FF5" aria-hidden="true">#</a></h1><h2 id="\u4E00\u3001exchange-\u6982\u5FF5" tabindex="-1">\u4E00\u3001Exchange \u6982\u5FF5 <a class="header-anchor" href="#\u4E00\u3001exchange-\u6982\u5FF5" aria-hidden="true">#</a></h2><ul><li>Exchange\uFF1A\u63A5\u6536\u6D88\u606F\uFF0C\u5E76\u6839\u636E\u8DEF\u7531\u952E\u8F6C\u53D1\u6D88\u606F\u6240\u7ED1\u5B9A\u7684\u961F\u5217\u3002</li></ul><p><img src="'+o+'" alt="\u4EA4\u6362\u673A"></p><ul><li>\u84DD\u8272\u6846\uFF1A\u5BA2\u6237\u7AEF\u53D1\u9001\u6D88\u606F\u81F3\u4EA4\u6362\u673A\uFF0C\u901A\u8FC7\u8DEF\u7531\u952E\u8DEF\u7531\u81F3\u6307\u5B9A\u7684\u961F\u5217\u3002</li><li>\u9EC4\u8272\u6846\uFF1A\u4EA4\u6362\u673A\u548C\u961F\u5217\u901A\u8FC7\u8DEF\u7531\u952E\u6709\u4E00\u4E2A\u7ED1\u5B9A\u7684\u5173\u7CFB\u3002</li><li>\u7EFF\u8272\u6846\uFF1A\u6D88\u8D39\u7AEF\u901A\u8FC7\u76D1\u542C\u961F\u5217\u6765\u63A5\u6536\u6D88\u606F\u3002</li></ul><h2 id="\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027" tabindex="-1">\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027 <a class="header-anchor" href="#\u4E8C\u3001\u4EA4\u6362\u673A\u5C5E\u6027" aria-hidden="true">#</a></h2><ol><li><code>Name</code>\uFF1A\u4EA4\u6362\u673A\u540D\u79F0</li><li><code>Type</code>\uFF1A\u4EA4\u6362\u673A\u7C7B\u578B \u2014\u2014 direct\u3001topic\u3001fanout\u3001headers\u3001sharding\uFF08\u6B64\u7BC7\u4E0D\u8BB2\uFF09</li><li><code>Durability</code>\uFF1A\u662F\u5426\u9700\u8981\u6301\u4E45\u5316\uFF0Ctrue \u4E3A\u6301\u4E45\u5316</li><li><code>Auto Delete</code>\uFF1A\u5F53\u6700\u540E\u4E00\u4E2A\u7ED1\u5B9A\u5230 Exchange \u4E0A\u7684\u961F\u5217\u5220\u9664\u540E\uFF0C\u81EA\u52A8\u5220\u9664\u8BE5 Exchange</li><li><code>Internal</code>\uFF1A\u5F53\u524DExchange\u662F\u5426\u7528\u4E8E RabbitMQ \u5185\u90E8\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u4E3A false</li><li><code>Arguments</code>\uFF1A\u6269\u5C55\u53C2\u6570\uFF0C\u7528\u4E8E\u6269\u5C55 AMQP \u534F\u8BAE\u81EA\u5B9A\u5236\u5316\u4F7F\u7528</li></ol><h2 id="\u4E09\u3001direct-exchange-\u76F4\u8FDE" tabindex="-1">\u4E09\u3001Direct Exchange(\u76F4\u8FDE) <a class="header-anchor" href="#\u4E09\u3001direct-exchange-\u76F4\u8FDE" aria-hidden="true">#</a></h2><ul><li><strong>\u6240\u6709\u53D1\u9001\u5230 Direct Exchange \u7684\u6D88\u606F\u88AB\u8F6C\u53D1\u5230 RouteKey \u4E2D\u6307\u5B9A\u7684Queue</strong></li></ul><p>\u6CE8\u610F\uFF1ADirect \u6A21\u5F0F\u53EF\u4EE5\u4F7F\u7528 RabbitMQ \u81EA\u5E26\u7684 Exchange\uFF1Adefault Exchange\uFF0C<strong>\u6240\u4EE5\u4E0D\u9700\u8981\u5C06 Exchange \u8FDB\u884C\u4EFB\u4F55\u7ED1\u5B9A (binding) \u64CD\u4F5C</strong>\uFF0C\u6D88\u606F\u4F20\u9012\u65F6\uFF0C<strong>RouteKey \u5FC5\u987B\u5B8C\u5168\u5339\u914D\u624D\u4F1A\u88AB\u961F\u5217\u63A5\u6536</strong>\uFF0C\u5426\u5219\u8BE5\u6D88\u606F\u4F1A\u88AB\u629B\u5F03\u3002</p><p><img src="'+e+`" alt="Direct Exchange\u7ED3\u6784\u56FE"></p><p><strong>\u91CD\u70B9\uFF1Arouting key \u4E0E\u961F\u5217 queues \u7684key\u4FDD\u6301\u4E00\u81F4\uFF0C\u5373\u53EF\u4EE5\u8DEF\u7531\u5230\u5BF9\u5E94\u7684 queue \u4E2D\u3002</strong></p><h2 id="_1\u3001\u4EE3\u7801\u6F14\u793A" tabindex="-1">1\u3001\u4EE3\u7801\u6F14\u793A <a class="header-anchor" href="#_1\u3001\u4EE3\u7801\u6F14\u793A" aria-hidden="true">#</a></h2><p>\u751F\u4EA7\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Producer4DirectExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u751F\u4EA7\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534822:15:52 </span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Producer4DirectExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//1\u521B\u5EFAConnectionFactory \u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//2\u521B\u5EFAChannel \u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//3 \u58F0\u660E \u58F0\u660E\u4EA4\u6362\u673A\u548C\u8DEF\u7531\u952E\u7684\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_direct_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test.direct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//4 \u53D1\u9001 \u53D1\u9001\u4EA4\u6362\u673A\uFF0C\u8DEF\u7531\u952E\u3001\u4FE1\u606F\uFF0C\u65E0\u9700\u6307\u5B9A\u4EA4\u6362\u673A\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Coder\u7F16\u7A0B Hello World RabbitMQ 4  Direct Exchange Message ... </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;"> 	</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u6D88\u8D39\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Consumer4DirectExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u6D88\u8D39\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534822:18:52 </span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer4DirectExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u521B\u5EFAConnectionFactory \u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u58F0\u660E\u4EA4\u6362\u673A\u540D\u79F0\u3001\u8DEF\u7531\u952E\u540D\u79F0\u3001\u4EA4\u6362\u673A\u7C7B\u578B\u3001\u961F\u5217\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_direct_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_direct_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test.direct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u8868\u793A\u58F0\u660E\u4E86\u4E00\u4E2A\u4EA4\u6362\u673A\uFF0C\u4EE5\u53CA\u4EA4\u6362\u673A\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u8868\u793A\u58F0\u660E\u4E86\u4E00\u4E2A\u961F\u5217</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u961F\u5217\u5EFA\u7ACB\u4E00\u4E2A\u7ED1\u5B9A\u5173\u7CFB:\u6D88\u8D39\u7AEF\u9700\u8981\u505A\u4EA4\u6362\u673A\u4E0E\u961F\u5217\u7684\u7ED1\u5B9A\uFF0C\u901A\u8FC7\u8DEF\u7531\u952E</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//durable \u662F\u5426\u6301\u4E45\u5316\u6D88\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">QueueingConsumer</span><span style="color:#A6ACCD;"> consumer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QueueingConsumer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">channel</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u53C2\u6570\uFF1A\u961F\u5217\u540D\u79F0\u3001\u662F\u5426\u81EA\u52A8ACK\u3001Consumer</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u5FAA\u73AF\u83B7\u53D6\u6D88\u606F  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">while</span><span style="color:#89DDFF;">(true){</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u83B7\u53D6\u6D88\u606F\uFF0C\u5982\u679C\u6CA1\u6709\u6D88\u606F\uFF0C\u8FD9\u4E00\u6B65\u5C06\u4F1A\u4E00\u76F4\u963B\u585E  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> delivery </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">nextDelivery</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6536\u5230\u6D88\u606F\uFF1A</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>\u6D4B\u8BD5\u7ED3\u679C\uFF1A</p><p><img src="`+c+'" alt="\u6253\u5370\u7ED3\u679C"></p><p>\u6CE8\u610F\u9700\u8981routingKey\u4FDD\u6301\u4E00\u81F4\u3002\u53EF\u4EE5\u81EA\u5DF1\u5C1D\u8BD5\u4FEE\u6539routingkey\uFF0C\u662F\u5426\u80FD\u6536\u5230\u6D88\u606F\u3002</p><h2 id="\u56DB\u3001topic-exchange" tabindex="-1">\u56DB\u3001Topic Exchange <a class="header-anchor" href="#\u56DB\u3001topic-exchange" aria-hidden="true">#</a></h2><ul><li>\u6240\u6709\u53D1\u9001\u5230Topic Exchange\u7684\u6D88\u606F\u88AB\u8F6C\u53D1\u5230\u6240\u6709\u7BA1\u7EBFRouteKey\u4E2D\u6307\u5B9ATopic\u7684Queue\u4E0A</li><li>Exchange\u5C06RouteKey\u548C\u67D0Topic\u8FDB\u884C\u6A21\u7CCA\u5339\u914D,\u6B64\u65F6\u961F\u5217\u9700\u8981\u7ED1\u5B9A\u4E00\u4E2ATopic</li></ul><blockquote><ol><li><p>\u6CE8\u610F\uFF1A\u53EF\u4EE5\u4F7F\u7528\u901A\u914D\u7B26\u8FDB\u884C\u6A21\u7CCA\u5339\u914D</p></li><li><p>\u7B26\u53F7 &quot;#&quot; \u5339\u914D\u4E00\u4E2A\u6216\u591A\u4E2A\u8BCD</p></li><li><p>\u7B26\u53F7 &quot;&quot; \u5339\u914D\u4E0D\u591A\u4E0D\u5C11\u4E00\u4E2A\u8BCD</p><p>\u4F8B\u5982\uFF1A&quot;log.#&quot; \u80FD\u591F\u5339\u914D\u5230 &quot;log.info.oa&quot;\uFF0C&quot;log.&quot; \u53EA\u4F1A\u5339\u914D\u5230 &quot;log.error&quot;</p></li></ol></blockquote><p><img src="'+s+`" alt="Topic Exchange\u7ED3\u6784\u56FE"></p><p>\u5728\u4E00\u5806\u6D88\u606F\u4E2D\uFF0C\u6BCF\u4E2A\u4E0D\u540C\u7684\u961F\u5217\u53EA\u5173\u5FC3\u81EA\u5DF1\u9700\u8981\u7684\u6D88\u606F\u3002</p><h2 id="_1\u3001\u4EE3\u7801\u6F14\u793A-1" tabindex="-1">1\u3001\u4EE3\u7801\u6F14\u793A <a class="header-anchor" href="#_1\u3001\u4EE3\u7801\u6F14\u793A-1" aria-hidden="true">#</a></h2><p>\u751F\u4EA7\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Producer4TopicExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u751F\u4EA7\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534822:32:41</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Producer4TopicExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//1\u521B\u5EFAConnectionFactory \u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//2\u521B\u5EFAChannel \u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//3\u58F0\u660E\u4EA4\u6362\u673A\u540D\u79F0\u3001\u4E09\u4E2A\u8DEF\u7531\u952E</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_topic_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.save</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.update</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.delete.abc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//4\u53D1\u9001</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Coder\u7F16\u7A0B Hello World RabbitMQ 4 Topic Exchange Message ...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey1 </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey2 </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;"> 	</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey3 </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u6D88\u8D39\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Consumer4TopicExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u6D88\u8D39\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534822:37:12</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer4TopicExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u521B\u5EFAConnectionFactory	\u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// \u58F0\u660E\u4EA4\u6362\u673A\u540D\u79F0\u3001\u4EA4\u6362\u673A\u7C7B\u578B\u3001\u961F\u5217\u540D\u79F0\u3001\u8DEF\u7531\u952E</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_topic_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_topic_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// 1 \u58F0\u660E\u4EA4\u6362\u673A </span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// 2 \u58F0\u660E\u961F\u5217</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// 3 \u5EFA\u7ACB\u4EA4\u6362\u673A\u548C\u961F\u5217\u7684\u7ED1\u5B9A\u5173\u7CFB:</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//durable \u662F\u5426\u6301\u4E45\u5316\u6D88\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">QueueingConsumer</span><span style="color:#A6ACCD;"> consumer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QueueingConsumer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">channel</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u53C2\u6570\uFF1A\u961F\u5217\u540D\u79F0\u3001\u662F\u5426\u81EA\u52A8ACK\u3001Consumer</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u5FAA\u73AF\u83B7\u53D6\u6D88\u606F  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">while</span><span style="color:#89DDFF;">(true){</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u83B7\u53D6\u6D88\u606F\uFF0C\u5982\u679C\u6CA1\u6709\u6D88\u606F\uFF0C\u8FD9\u4E00\u6B65\u5C06\u4F1A\u4E00\u76F4\u963B\u585E  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> delivery </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">nextDelivery</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6536\u5230\u6D88\u606F\uFF1A</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>\u6D4B\u8BD5\u7ED3\u679C\uFF1A</p><p><img src="`+r+'" alt="\u6253\u5370\u7ED3\u679C"></p><p>\u6CE8\u610F\u4E00\u4E2A\u95EE\u9898\uFF1A\u9700\u8981\u8FDB\u884C\u89E3\u7ED1</p><h2 id="\u4E94\u3001fanout-exchange" tabindex="-1">\u4E94\u3001Fanout Exchange <a class="header-anchor" href="#\u4E94\u3001fanout-exchange" aria-hidden="true">#</a></h2><ul><li>\u4E0D\u5904\u7406\u8DEF\u7531\u952E\uFF0C\u53EA\u9700\u8981\u7B80\u5355\u7684\u5C06\u961F\u91CC\u7ED1\u5B9A\u5230\u4EA4\u6362\u673A\u4E0A</li><li>\u53D1\u9001\u5230\u4EA4\u6362\u673A\u7684\u6D88\u606F\u90FD\u4F1A\u88AB\u8F6C\u53D1\u5230\u4E0E\u8BE5\u4EA4\u6362\u673A\u7ED1\u5B9A\u7684\u6240\u6709\u961F\u5217\u4E0A</li><li>Fanout\u4EA4\u6362\u673A\u8F6C\u53D1\u6D88\u606F\u662F\u6700\u5FEB\u7684</li></ul><p><img src="'+t+`" alt="Fanout Exchange\u7ED3\u6784\u56FE"></p><h2 id="_1\u3001\u4EE3\u7801\u6F14\u793A-2" tabindex="-1">1\u3001\u4EE3\u7801\u6F14\u793A <a class="header-anchor" href="#_1\u3001\u4EE3\u7801\u6F14\u793A-2" aria-hidden="true">#</a></h2><p>\u751F\u4EA7\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Producer4FanoutExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u751F\u4EA7\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534823:01:16</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Producer4FanoutExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//1\u521B\u5EFAConnectionFactory \u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//2 \u521B\u5EFAChannel	\u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//3 \u58F0\u660E\u4EA4\u6362\u673A</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_fanout_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//4 \u53D1\u9001</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">for</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Coder \u7F16\u7A0B  Hello World RabbitMQ 4 FANOUT Exchange Message ...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u65E0\u9700\u8DEF\u7531\u952E</span></span>
<span class="line"><span style="color:#A6ACCD;">			channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;"> 			</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u6D88\u8D39\u7AEF\uFF1A</p><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">* @ClassName: Consumer4FanoutExchange </span></span>
<span class="line"><span style="color:#676E95;">* @Description: \u6D88\u8D39\u8005</span></span>
<span class="line"><span style="color:#676E95;">* </span><span style="color:#F78C6C;">@author</span><span style="color:#676E95;"> Coder\u7F16\u7A0B</span></span>
<span class="line"><span style="color:#676E95;">* @date2019\u5E747\u670819\u65E5 \u4E0B\u534823:21:18</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer4FanoutExchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">//\u521B\u5EFAConnectionFactory  \u521B\u5EFA\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ConnectionUtils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u521B\u5EFA\u4FE1\u9053</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// \u58F0\u660E\u4EA4\u6362\u673A\u540D\u79F0\u3001\u4EA4\u6362\u673A\u7C7B\u578B\u3001\u961F\u5217\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_fanout_exchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> exchangeType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test_fanout_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">//\u4E0D\u8BBE\u7F6E\u8DEF\u7531\u952E</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u58F0\u660E\u4EA4\u6362\u673A</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u58F0\u660E\u961F\u5217</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u8FDB\u884C\u961F\u5217\u548C\u4EA4\u6362\u673A\u7684\u7ED1\u5B9A</span></span>
<span class="line"><span style="color:#A6ACCD;">		channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> exchangeName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//durable \u662F\u5426\u6301\u4E45\u5316\u6D88\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">QueueingConsumer</span><span style="color:#A6ACCD;"> consumer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QueueingConsumer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">channel</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u53C2\u6570\uFF1A\u961F\u5217\u540D\u79F0\u3001\u662F\u5426\u81EA\u52A8ACK\u3001Consumer</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u5FAA\u73AF\u83B7\u53D6\u6D88\u606F  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">while</span><span style="color:#89DDFF;">(true){</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u83B7\u53D6\u6D88\u606F\uFF0C\u5982\u679C\u6CA1\u6709\u6D88\u606F\uFF0C\u8FD9\u4E00\u6B65\u5C06\u4F1A\u4E00\u76F4\u963B\u585E  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> delivery </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> consumer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">nextDelivery</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">());</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6536\u5230\u6D88\u606F\uFF1A</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>\u6D4B\u8BD5\u7ED3\u679C\uFF1A</p><p><img src="`+D+'" alt="\u6253\u5370\u7ED3\u679C"></p><hr><h2 id="\u516D\u3001headers-exchanges" tabindex="-1">\u516D\u3001Headers Exchanges <a class="header-anchor" href="#\u516D\u3001headers-exchanges" aria-hidden="true">#</a></h2><p>\u4E0D\u5904\u7406\u8DEF\u7531\u952E\u3002\u800C\u662F\u6839\u636E\u53D1\u9001\u7684\u6D88\u606F\u5185\u5BB9\u4E2D\u7684headers\u5C5E\u6027\u8FDB\u884C\u5339\u914D\u3002\u5728\u7ED1\u5B9AQueue\u4E0EExchange\u65F6\u6307\u5B9A\u4E00\u7EC4\u952E\u503C\u5BF9\uFF1B\u5F53\u6D88\u606F\u53D1\u9001\u5230RabbitMQ\u65F6\u4F1A\u53D6\u5230\u8BE5\u6D88\u606F\u7684headers\u4E0EExchange\u7ED1\u5B9A\u65F6\u6307\u5B9A\u7684\u952E\u503C\u5BF9\u8FDB\u884C\u5339\u914D\uFF1B\u5982\u679C\u5B8C\u5168\u5339\u914D\u5219\u6D88\u606F\u4F1A\u8DEF\u7531\u5230\u8BE5\u961F\u5217\uFF0C\u5426\u5219\u4E0D\u4F1A\u8DEF\u7531\u5230\u8BE5\u961F\u5217\u3002headers\u5C5E\u6027\u662F\u4E00\u4E2A\u952E\u503C\u5BF9\uFF0C\u53EF\u4EE5\u662FHashtable\uFF0C\u952E\u503C\u5BF9\u7684\u503C\u53EF\u4EE5\u662F\u4EFB\u4F55\u7C7B\u578B\u3002\u800Cfanout\uFF0Cdirect\uFF0Ctopic \u7684\u8DEF\u7531\u952E\u90FD\u9700\u8981\u8981\u5B57\u7B26\u4E32\u5F62\u5F0F\u7684\u3002</p><p>\u5339\u914D\u89C4\u5219x-match\u6709\u4E0B\u5217\u4E24\u79CD\u7C7B\u578B\uFF1A</p><ol><li>x-match = all \uFF1A\u8868\u793A\u6240\u6709\u7684\u952E\u503C\u5BF9\u90FD\u5339\u914D\u624D\u80FD\u63A5\u53D7\u5230\u6D88\u606F</li><li>x-match = any \uFF1A\u8868\u793A\u53EA\u8981\u6709\u952E\u503C\u5BF9\u5339\u914D\u5C31\u80FD\u63A5\u53D7\u5230\u6D88\u606F</li></ol><h2 id="\u4E03\u3001\u5176\u4ED6" tabindex="-1">\u4E03\u3001\u5176\u4ED6 <a class="header-anchor" href="#\u4E03\u3001\u5176\u4ED6" aria-hidden="true">#</a></h2><h2 id="_1\u3001bingding-\u2014\u2014-\u7ED1\u5B9A" tabindex="-1">1\u3001Bingding \u2014\u2014 \u7ED1\u5B9A <a class="header-anchor" href="#_1\u3001bingding-\u2014\u2014-\u7ED1\u5B9A" aria-hidden="true">#</a></h2><ul><li>Exchange\u548CExchange\u3001Queue\u4E4B\u95F4\u7684\u8FDE\u63A5\u5173\u7CFB</li><li>Bingding\u53EF\u4EE5\u5305\u542BRoutingKey\u6216\u8005\u53C2\u6570</li></ul><h2 id="_2\u3001queue\u2014\u2014\u6D88\u606F\u961F\u5217" tabindex="-1">2\u3001Queue\u2014\u2014\u6D88\u606F\u961F\u5217 <a class="header-anchor" href="#_2\u3001queue\u2014\u2014\u6D88\u606F\u961F\u5217" aria-hidden="true">#</a></h2><ul><li>\u6D88\u606F\u961F\u5217\uFF0C\u5B9E\u9645\u5B58\u50A8\u6D88\u606F\u6570\u636E</li><li>Durability\uFF1A\u662F\u5426\u6301\u4E45\u5316\uFF0CDurable:\u662F \uFF0CTransient\uFF1A\u5426</li><li>Auto delete\uFF1A\u5982\u9009yes\uFF0C\u4EE3\u8868\u5F53\u6700\u540E\u4E00\u4E2A\u76D1\u542C\u88AB\u79FB\u9664\u4E4B\u540E\uFF0C\u8BE5Queue\u4F1A\u81EA\u52A8\u88AB\u5220\u9664\u3002</li></ul><h2 id="_3\u3001message\u2014\u2014\u6D88\u606F" tabindex="-1">3\u3001Message\u2014\u2014\u6D88\u606F <a class="header-anchor" href="#_3\u3001message\u2014\u2014\u6D88\u606F" aria-hidden="true">#</a></h2><ul><li>\u670D\u52A1\u5668\u4E0E\u5E94\u7528\u7A0B\u5E8F\u4E4B\u95F4\u4F20\u9001\u7684\u6570\u636E</li><li>\u672C\u8D28\u4E0A\u5C31\u662F\u4E00\u6BB5\u6570\u636E\uFF0C\u7531Properties\u548CPayload\uFF08Body\uFF09\u7EC4\u6210</li><li>\u5E38\u7528\u5C5E\u6027\uFF1Adelivery mode\u3001headers(\u81EA\u5B9A\u4E49\u5C5E\u6027)</li></ul><h2 id="_4\u3001\u5176\u4ED6\u5C5E\u6027" tabindex="-1">4\u3001\u5176\u4ED6\u5C5E\u6027 <a class="header-anchor" href="#_4\u3001\u5176\u4ED6\u5C5E\u6027" aria-hidden="true">#</a></h2><p>content_type\u3001content_encoding\u3001priority</p><p>correlation_id\u3001reply_to\u3001expiration\u3001message_id</p><p>timestamp\u3001type\u3001user_id\u3001app_id\u3001cluster_id</p><h2 id="_5\u3001virtual-host\u865A\u62DF\u4E3B\u673A" tabindex="-1">5\u3001Virtual Host\u865A\u62DF\u4E3B\u673A <a class="header-anchor" href="#_5\u3001virtual-host\u865A\u62DF\u4E3B\u673A" aria-hidden="true">#</a></h2><ul><li>\u865A\u62DF\u5730\u5740,\u7528\u4E8E\u8FDB\u884C\u903B\u8F91\u9694\u79BB\uFF0C\u6700\u4E0A\u5C42\u7684\u6D88\u606F\u8DEF\u7531</li><li>\u4E00\u4E2AVirtual Host\u91CC\u9762\u53EF\u4EE5\u6709\u82E5\u5E72\u4E2AExchange\u548CQueue</li><li>\u540C\u4E00\u4E2AVirtual Host\u91CC\u9762\u4E0D\u80FD\u6709\u76F8\u540C\u540D\u79F0\u7684Exchange\u6216Queue</li></ul>',61),C=[A];function F(i,u,b,m,h,g){return l(),a("div",null,C)}const q=n(y,[["render",F]]);export{x as __pageData,q as default};
